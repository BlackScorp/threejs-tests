<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8>
    <title>Test</title>
    <style>
        body {
            margin: 0;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 0;
        }
        canvas {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>
<div class="viewport">

</div>
<script src="three.min.js"></script>
<script>
    var width  = window.innerWidth;
    var height = window.innerHeight;
    var scene = new THREE.Scene();
    var clock  = new THREE.Clock();
    var camera = new THREE.OrthographicCamera(window.innerWidth / -2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / -2, 1,100);
    //camera = new THREE.PerspectiveCamera( 40, width / height, 1, 100 );
    var renderer = new THREE.WebGLRenderer({alpha: true} );
    var light = new THREE.AmbientLight( 0xffffff,1.5 ); // soft white light
    var loader = new THREE.JSONLoader();

    document.body.appendChild(renderer.domElement);
    renderer.setSize(window.innerWidth, window.innerHeight);
    camera.position.set( 0, 200, 0 );
    scene.add(camera);
    scene.add(light);


    var animation;
    var mesh;
    var action = {};
    var mixer = [];
    var files = [
        'gladiator3.1.json',
        'gladiator3.1-shield.json',
        'gladiator3.1-sword.json',
        'gladiator3.1-armor.json',
        'gladiator3.1-torso.json',
        'gladiator3.1-helmet.json',
    ];

    for(var i = 0,il = files.length;i <il;i++){
        var current = files[i];
        loader.load(current, function (geometry, materials) {

            materials.forEach( function ( material ) {

                material.skinning = true;
                material.opacity = 1;
                material.transparent = true;
                material.alphaTest = 0.8;

            } );
            var material = new THREE.MeshFaceMaterial(materials);


            // create a mesh
            mesh = new THREE.SkinnedMesh(
                    geometry,
                    material
            );
            mesh.scale.z = mesh.scale.y = mesh.scale.x = 50;

            var localmixer  = new THREE.AnimationMixer( mesh );

            action.idle  = localmixer.clipAction( geometry.animations[ 0 ] );
            mixer.push(localmixer);
            action.idle.play();
            scene.add(mesh);


            render();
        });
    }


    function render() {
        //animation.update(.01);
        renderer.render(scene, camera);
        var delta = clock.getDelta();
        var theta = clock.getElapsedTime();

        if ( mixer ) {
            for(var i = 0,il=mixer.length;i < il;i++){
                var current = mixer[i];
                current.update(delta);
            }
        }

        requestAnimationFrame(render);
    }

</script>
</body>
</html>